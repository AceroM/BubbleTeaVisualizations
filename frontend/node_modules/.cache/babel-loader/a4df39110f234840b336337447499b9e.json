{"ast":null,"code":"export default function bubbleChart() {\n  var width = 960,\n      height = 960,\n      marginTop = 96,\n      minRadius = 6,\n      maxRadius = 20,\n      columnForColors = \"category\",\n      columnForTitle = \"title\",\n      columnForRadius = \"views\",\n      forceApart = -50,\n      unitName = \"hearts\",\n      customColors = false,\n      customRange,\n      customDomain,\n      chartSelection,\n      chartSVG,\n      showTitleOnCircle = false;\n  /**\n   * The command to actually render the chart after setting the settings.\n   * @public\n   * @param {string} selection - The div ID that you want to render in\n   */\n\n  function chart(selection) {\n    var data = selection.datum();\n    chartSelection = selection;\n    var div = selection,\n        svg = div.selectAll(\"svg\");\n    svg.attr(\"width\", width).attr(\"height\", height);\n    chartSVG = svg;\n    var tooltip = selection.append(\"div\").style(\"position\", \"absolute\").style(\"visibility\", \"hidden\").style(\"color\", \"white\").style(\"padding\", \"8px\").style(\"background-color\", \"#626D71\").style(\"border-radius\", \"6px\").style(\"text-align\", \"center\").style(\"font-family\", \"monospace\").style(\"width\", \"400px\").text(\"\");\n    var simulation = d3.forceSimulation(data).force(\"charge\", d3.forceManyBody().strength([forceApart])).force(\"x\", d3.forceX()).force(\"y\", d3.forceY()).on(\"tick\", ticked);\n\n    function ticked(e) {\n      node.attr(\"transform\", function (d) {\n        return \"translate(\" + [d.x + width / 2, d.y + (height + marginTop) / 2] + \")\";\n      });\n    }\n\n    var colorCircles;\n\n    if (!customColors) {\n      colorCircles = d3.scaleOrdinal(d3.schemeCategory10);\n    } else {\n      colorCircles = d3.scaleOrdinal().domain(customDomain).range(customRange);\n    }\n\n    var minRadiusDomain = d3.min(data, function (d) {\n      return +d[columnForRadius];\n    });\n    var maxRadiusDomain = d3.max(data, function (d) {\n      return +d[columnForRadius];\n    });\n    var scaleRadius = d3.scaleLinear().domain([minRadiusDomain, maxRadiusDomain]).range([minRadius, maxRadius]);\n    var node = svg.selectAll(\"circle\").data(data).enter().append(\"g\").attr(\"transform\", \"translate(\" + [width / 2, height / 2] + \")\").style(\"opacity\", 1);\n    node.append(\"circle\").attr(\"id\", function (d, i) {\n      return i;\n    }).attr(\"r\", function (d) {\n      return scaleRadius(d[columnForRadius]);\n    }).style(\"fill\", function (d) {\n      return colorCircles(d[columnForColors]);\n    }).on(\"mouseover\", function (d) {\n      tooltip.html(d[columnForTitle] + \"<br/>\" + d[columnForColors] + \"<br/>\" + d[columnForRadius] + \" \" + unitName);\n      return tooltip.style(\"visibility\", \"visible\");\n    }).on(\"mousemove\", function () {\n      return tooltip.style(\"top\", d3.event.pageY - 10 + \"px\").style(\"left\", d3.event.pageX + 10 + \"px\");\n    }).on(\"mouseout\", function () {\n      return tooltip.style(\"visibility\", \"hidden\");\n    });\n    node.append(\"clipPath\").attr(\"id\", function (d, i) {\n      return \"clip-\" + i;\n    }).append(\"use\").attr(\"xlink:href\", function (d, i) {\n      return \"#\" + i;\n    });\n\n    if (showTitleOnCircle) {\n      node.append(\"text\").attr(\"clip-path\", function (d, i) {\n        return \"url(#clip-\" + i + \")\";\n      }).attr(\"text-anchor\", \"middle\").append(\"tspan\").attr(\"x\", function (d) {\n        return 0; //-1*scaleRadius(d[columnForRadius])/3;\n      }).attr(\"y\", function (d) {\n        return \".3em\"; //scaleRadius(d[columnForRadius])/4;\n      }).text(function (d) {\n        return d[columnForTitle];\n      }).on(\"mouseover\", function (d) {\n        tooltip.html(d[columnForTitle] + \"<br/>\" + d[columnForColors] + \"<br/>\" + d[columnForRadius] + \" \" + unitName);\n        return tooltip.style(\"visibility\", \"visible\");\n      }).on(\"mousemove\", function () {\n        return tooltip.style(\"top\", d3.event.pageY - 10 + \"px\").style(\"left\", d3.event.pageX + 10 + \"px\");\n      }).on(\"mouseout\", function () {\n        return tooltip.style(\"visibility\", \"hidden\");\n      });\n    }\n\n    svg.append(\"text\").attr(\"x\", width / 2).attr(\"y\", marginTop).attr(\"text-anchor\", \"middle\").attr(\"font-size\", \"1.8em\").text(title);\n  }\n\n  chart.width = chartWidth;\n  chart.height = chartHeight;\n  chart.columnForColors = chartColForColors;\n  chart.columnForRadius = chartColForRadius;\n  chart.columnForTitle = chartColForTitle;\n  chart.minRadius = chartMinRadius;\n  chart.maxRadius = chartMaxRadius;\n  chart.forceApart = chartForceApart;\n  chart.unitName = chartUnitName;\n  chart.customColors = chartCustomColors;\n  chart.showTitleOnCircle = chartShowTitleOnCircle;\n  chart.title = chartTitle;\n  chart.remove = chartRemove;\n  /**\n   * Get/set the height of the chart\n   * Use 'chart.width' to get or set.\n   * @example\n   * chart.columnForColors(960);\t// Sets the width of the SVG to 960\n   * chart.columnForColors();\t// returns 960\n   *\n   * @public\n   * @param {number} [value] - The width of the chart\n   * @returns function - Chart, allowing chaining of commands\n   */\n\n  function chartWidth(value) {\n    if (!arguments.length) {\n      return width;\n    }\n\n    width = value;\n    return chart;\n  }\n  /**\n   * Get/set the height of the chart.\n   * Use 'chart.height' to get or set.\n   * @example\n   * chart.height(960);\t// Sets the height of the SVG to 960\n   * chart.height();\t\t// returns 960\n   *\n   * @public\n   * @param {number} [value] - The height of the chart\n   * @returns function - Chart, allowing chaining of commands\n   */\n\n\n  function chartHeight(value) {\n    if (!arguments.length) {\n      return height;\n    }\n\n    height = value;\n    marginTop = 0.05 * height;\n    return chart;\n  }\n  /**\n   * Get/set the property used to determine the colors of the bubbles.\n   * Use 'chart.columnForColors' to get or set.\n   * @example\n   * chart.columnForColors(\"Sex\");\t// Sets the column to birthCount\n   * chart.columnForColors();\t// returns \"Sex\"\n   * @public\n   * @param {string} [value] - Property name to bind the bubble color to.\n   * @returns function - Chart, allowing chaining of commands\n   */\n\n\n  function chartColForColors(value) {\n    if (!arguments.length) {\n      return columnForColors;\n    }\n\n    columnForColors = value;\n    return chart;\n  }\n  /**\n   * Get/set the property to determine the titles of the bubbles.\n   * Use 'chart.columnForTitle' to get or set.\n   * @example\n   * chart.columnForTitle(\"Name\");\t// Sets the column to birthCount\n   * chart.columnForTitle();\t\t// returns \"Name\"\n   *\n   * @param {string} [value] - Property name to bind the bubble title to.\n   * @returns function - Chart, allowing chaining of commands\n   */\n\n\n  function chartColForTitle(value) {\n    if (!arguments.length) {\n      return columnForTitle;\n    }\n\n    columnForTitle = value;\n    return chart;\n  }\n  /**\n   * Get/set the property to determine the radii of the bubbles.\n   * Use 'chart.columnForRadius' to get or set.\n   *\n   * @example\n   * chart.columnForRadius(\"birthCount\");\t// Sets the column to birthCount\n   * chart.columnForRadius();\t\t// returns \"birthCount\"\n   * @public\n   * @param {string} [value] - Property name to bind the bubble radius to. Requires a numerical property.\n   * @returns function - Chart, allowing chaining of commands\n   */\n\n\n  function chartColForRadius(value) {\n    if (!arguments.length) {\n      return columnForRadius;\n    }\n\n    columnForRadius = value;\n    return chart;\n  }\n  /**\n   * Get/set the minimum radius of the bubbles.\n   * Use 'chart.minRadius' to get or set.\n   * @example\n   * \tchart.columnForColors(3); \t// Sets the column to birthCount\n   *  chart.columnForColors();\t// returns 3\n   *\n   * @param {number} [value] - The minimum radius for the width of the bubbles\n   * @returns function - Chart, allowing chaining of commands\n   */\n\n\n  function chartMinRadius(value) {\n    if (!arguments.length) {\n      return minRadius;\n    }\n\n    minRadius = value;\n    return chart;\n  }\n  /**\n   * Get/set the maximum radius of the bubbles.\n   * Use 'chart.maxRadius' to get or set.\n   *\n   * @public\n   * @param {number} [value] - The maximum radius of the bubbles for the largest value in the dataset\n   * @returns function - Chart, allowing chaining of commands\n   */\n\n\n  function chartMaxRadius(value) {\n    if (!arguments.length) {\n      return maxRadius;\n    }\n\n    maxRadius = value;\n    return chart;\n  }\n  /**\n   * Get/set the unit name for the property the is represented by the radius of the bubbles.\n   * Used in the tooltip of the bubbles.\n   * Use 'chart.unitName' to get or set.\n   * @example\n   * chart.unitName(\" babies\");\t// Sets the column to birthCount\n   * chart.unitName();\t\t// returns \" babies\"\n   *\n   * @public\n   * @param {any} [value] - The unit name to display on the tooltip when hovering over a bubble\n   * @returns function - Chart, allowing chaining of commands\n   */\n\n\n  function chartUnitName(value) {\n    if (!arguments.length) {\n      return unitName;\n    }\n\n    unitName = value;\n    return chart;\n  }\n  /**\n   * Get/set the force the separates and pushes together the bubbles on loading of the chart\n   * Use 'chart.forceApart' to get or set.\n   * @example\n   * chart.forceApart(150);\t// Sets the column to birthCount\n   * chart.forceApart();\t// returns 150\n   *\n   * @public\n   * @param {any} [value] - Determines the force to separate the bubbles from each other when loading the chart\n   * @returns function - Chart, allowing chaining of commands\n   */\n\n\n  function chartForceApart(value) {\n    if (!arguments.length) {\n      return forceApart;\n    }\n\n    forceApart = value;\n    return chart;\n  }\n  /**\n   * Get/set the property that determines if we show or hide the title of the data on the bubbles.\n   * Use 'chart.showTitleOnCircle' to get or set.\n   * @example\n   * chart.showTitleOnCircle(true);\n   * chart.forceApart();\t// returns true\n   *\n   * @public\n   * @param {boolean} [value] - Determines whether to show or hide the title of the data on the bubbles\n   * @returns function - Chart, allowing chaining of commands\n   */\n\n\n  function chartShowTitleOnCircle(value) {\n    if (!arguments.length) {\n      return showTitleOnCircle;\n    }\n\n    showTitleOnCircle = value;\n    return chart;\n  }\n  /**\n   * Set the domain and range of the colors used for the bubbles. This is only needed if you want to use custom colors in the chart.\n   * Use 'chart.customColors' to set.\n   * @example\n   * chart.customColors([\"M\",\"F\"], [\"#70b7f0\",\"#e76486\"]); \t// Sets the custom colors domain and range\n   *\n   * @param {any[]} domain - The domain. This is the set of categories used for binding the colors.\n   * @param {string[]} range - The range. This is an array of color codes that you want to represent each category in the domain.\n   * \t\t\t\t\t\t\t Note: The length of the array must perfectly match the length of the domain array.\n   * @returns function - Chart, allowing chaining of commands\n   */\n\n\n  function chartCustomColors(domain, range) {\n    customColors = true;\n    customDomain = domain;\n    customRange = range;\n    return chart;\n  }\n  /**\n   * Get/set the property that determines the title of the chart.\n   * Use 'chart.title' to get or set.\n   * @example\n   * chart.title(\"Birth Count in the U.S. in 2016\"); // Sets the chart title\n   * chart.title();\t// returns \"Birth Count in the U.S. in 2016\"\n   * @public\n   * @param {string} value - The title of the chart\n   * @returns function - Chart, allowing chaining of commands\n   */\n\n\n  function chartTitle(value) {\n    if (!arguments.length) {\n      return title;\n    }\n\n    title = value;\n    return chart;\n  }\n  /**\n   * Animate the removal of data from the chart (and the title)\n   * @public\n   * @param {function} [callback] - At the end of each node animation call this function for each node\n   * @returns function - Chart, allowing chaining of commands\n   */\n\n\n  function chartRemove(callback) {\n    chartSVG.selectAll(\"text\").style(\"opacity\", 1).transition().duration(500).style(\"opacity\", \"0\").remove();\n\n    if (!arguments.length) {\n      chartSVG.selectAll(\"g\").style(\"opacity\", 1).transition().duration(500).style(\"opacity\", \"0\").remove();\n    } else {\n      chartSVG.selectAll(\"g\").style(\"opacity\", 1).duration(500).style(\"opacity\", \"0\").remove().on(\"end\", callback);\n    }\n\n    return chart;\n  }\n\n  return chart;\n}","map":{"version":3,"sources":["/Users/miguel/DataVisualization/BubbleTeaVisualizations/src/components/BubbleTea/bubbleChart.js"],"names":["bubbleChart","width","height","marginTop","minRadius","maxRadius","columnForColors","columnForTitle","columnForRadius","forceApart","unitName","customColors","customRange","customDomain","chartSelection","chartSVG","showTitleOnCircle","chart","selection","data","datum","div","svg","selectAll","attr","tooltip","append","style","text","simulation","d3","forceSimulation","force","forceManyBody","strength","forceX","forceY","on","ticked","e","node","d","x","y","colorCircles","scaleOrdinal","schemeCategory10","domain","range","minRadiusDomain","min","maxRadiusDomain","max","scaleRadius","scaleLinear","enter","i","html","event","pageY","pageX","title","chartWidth","chartHeight","chartColForColors","chartColForRadius","chartColForTitle","chartMinRadius","chartMaxRadius","chartForceApart","chartUnitName","chartCustomColors","chartShowTitleOnCircle","chartTitle","remove","chartRemove","value","arguments","length","callback","transition","duration"],"mappings":"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","sourcesContent":["export default function bubbleChart() {\n  var width = 960,\n    height = 960,\n    marginTop = 96,\n    minRadius = 6,\n    maxRadius = 20,\n    columnForColors = \"category\",\n    columnForTitle = \"title\",\n    columnForRadius = \"views\",\n    forceApart = -50,\n    unitName = \"hearts\",\n    customColors = false,\n    customRange,\n    customDomain,\n    chartSelection,\n    chartSVG,\n    showTitleOnCircle = false;\n\n  /**\n   * The command to actually render the chart after setting the settings.\n   * @public\n   * @param {string} selection - The div ID that you want to render in\n   */\n  function chart(selection) {\n    var data = selection.datum();\n    chartSelection = selection;\n    var div = selection,\n      svg = div.selectAll(\"svg\");\n    svg.attr(\"width\", width).attr(\"height\", height);\n    chartSVG = svg;\n\n    var tooltip = selection\n      .append(\"div\")\n      .style(\"position\", \"absolute\")\n      .style(\"visibility\", \"hidden\")\n      .style(\"color\", \"white\")\n      .style(\"padding\", \"8px\")\n      .style(\"background-color\", \"#626D71\")\n      .style(\"border-radius\", \"6px\")\n      .style(\"text-align\", \"center\")\n      .style(\"font-family\", \"monospace\")\n      .style(\"width\", \"400px\")\n      .text(\"\");\n\n    var simulation = d3\n      .forceSimulation(data)\n      .force(\"charge\", d3.forceManyBody().strength([forceApart]))\n      .force(\"x\", d3.forceX())\n      .force(\"y\", d3.forceY())\n      .on(\"tick\", ticked);\n\n    function ticked(e) {\n      node.attr(\"transform\", function(d) {\n        return (\n          \"translate(\" + [d.x + width / 2, d.y + (height + marginTop) / 2] + \")\"\n        );\n      });\n    }\n\n    var colorCircles;\n    if (!customColors) {\n      colorCircles = d3.scaleOrdinal(d3.schemeCategory10);\n    } else {\n      colorCircles = d3\n        .scaleOrdinal()\n        .domain(customDomain)\n        .range(customRange);\n    }\n\n    var minRadiusDomain = d3.min(data, function(d) {\n      return +d[columnForRadius];\n    });\n    var maxRadiusDomain = d3.max(data, function(d) {\n      return +d[columnForRadius];\n    });\n    var scaleRadius = d3\n      .scaleLinear()\n      .domain([minRadiusDomain, maxRadiusDomain])\n      .range([minRadius, maxRadius]);\n\n    var node = svg\n      .selectAll(\"circle\")\n      .data(data)\n      .enter()\n      .append(\"g\")\n      .attr(\"transform\", \"translate(\" + [width / 2, height / 2] + \")\")\n      .style(\"opacity\", 1);\n\n    node\n      .append(\"circle\")\n      .attr(\"id\", function(d, i) {\n        return i;\n      })\n      .attr(\"r\", function(d) {\n        return scaleRadius(d[columnForRadius]);\n      })\n      .style(\"fill\", function(d) {\n        return colorCircles(d[columnForColors]);\n      })\n      .on(\"mouseover\", function(d) {\n        tooltip.html(\n          d[columnForTitle] +\n            \"<br/>\" +\n            d[columnForColors] +\n            \"<br/>\" +\n            d[columnForRadius] +\n            \" \" +\n            unitName\n        );\n        return tooltip.style(\"visibility\", \"visible\");\n      })\n      .on(\"mousemove\", function() {\n        return tooltip\n          .style(\"top\", d3.event.pageY - 10 + \"px\")\n          .style(\"left\", d3.event.pageX + 10 + \"px\");\n      })\n      .on(\"mouseout\", function() {\n        return tooltip.style(\"visibility\", \"hidden\");\n      });\n    node\n      .append(\"clipPath\")\n      .attr(\"id\", function(d, i) {\n        return \"clip-\" + i;\n      })\n      .append(\"use\")\n      .attr(\"xlink:href\", function(d, i) {\n        return \"#\" + i;\n      });\n    if (showTitleOnCircle) {\n      node\n        .append(\"text\")\n        .attr(\"clip-path\", function(d, i) {\n          return \"url(#clip-\" + i + \")\";\n        })\n        .attr(\"text-anchor\", \"middle\")\n        .append(\"tspan\")\n        .attr(\"x\", function(d) {\n          return 0; //-1*scaleRadius(d[columnForRadius])/3;\n        })\n        .attr(\"y\", function(d) {\n          return \".3em\"; //scaleRadius(d[columnForRadius])/4;\n        })\n        .text(function(d) {\n          return d[columnForTitle];\n        })\n        .on(\"mouseover\", function(d) {\n          tooltip.html(\n            d[columnForTitle] +\n              \"<br/>\" +\n              d[columnForColors] +\n              \"<br/>\" +\n              d[columnForRadius] +\n              \" \" +\n              unitName\n          );\n          return tooltip.style(\"visibility\", \"visible\");\n        })\n        .on(\"mousemove\", function() {\n          return tooltip\n            .style(\"top\", d3.event.pageY - 10 + \"px\")\n            .style(\"left\", d3.event.pageX + 10 + \"px\");\n        })\n        .on(\"mouseout\", function() {\n          return tooltip.style(\"visibility\", \"hidden\");\n        });\n    }\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", width / 2)\n      .attr(\"y\", marginTop)\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"font-size\", \"1.8em\")\n      .text(title);\n  }\n\n  chart.width = chartWidth;\n  chart.height = chartHeight;\n  chart.columnForColors = chartColForColors;\n  chart.columnForRadius = chartColForRadius;\n  chart.columnForTitle = chartColForTitle;\n  chart.minRadius = chartMinRadius;\n  chart.maxRadius = chartMaxRadius;\n  chart.forceApart = chartForceApart;\n  chart.unitName = chartUnitName;\n  chart.customColors = chartCustomColors;\n  chart.showTitleOnCircle = chartShowTitleOnCircle;\n  chart.title = chartTitle;\n  chart.remove = chartRemove;\n\n  /**\n   * Get/set the height of the chart\n   * Use 'chart.width' to get or set.\n   * @example\n   * chart.columnForColors(960);\t// Sets the width of the SVG to 960\n   * chart.columnForColors();\t// returns 960\n   *\n   * @public\n   * @param {number} [value] - The width of the chart\n   * @returns function - Chart, allowing chaining of commands\n   */\n  function chartWidth(value) {\n    if (!arguments.length) {\n      return width;\n    }\n    width = value;\n    return chart;\n  }\n\n  /**\n   * Get/set the height of the chart.\n   * Use 'chart.height' to get or set.\n   * @example\n   * chart.height(960);\t// Sets the height of the SVG to 960\n   * chart.height();\t\t// returns 960\n   *\n   * @public\n   * @param {number} [value] - The height of the chart\n   * @returns function - Chart, allowing chaining of commands\n   */\n  function chartHeight(value) {\n    if (!arguments.length) {\n      return height;\n    }\n    height = value;\n    marginTop = 0.05 * height;\n    return chart;\n  }\n\n  /**\n   * Get/set the property used to determine the colors of the bubbles.\n   * Use 'chart.columnForColors' to get or set.\n   * @example\n   * chart.columnForColors(\"Sex\");\t// Sets the column to birthCount\n   * chart.columnForColors();\t// returns \"Sex\"\n   * @public\n   * @param {string} [value] - Property name to bind the bubble color to.\n   * @returns function - Chart, allowing chaining of commands\n   */\n  function chartColForColors(value) {\n    if (!arguments.length) {\n      return columnForColors;\n    }\n    columnForColors = value;\n    return chart;\n  }\n\n  /**\n   * Get/set the property to determine the titles of the bubbles.\n   * Use 'chart.columnForTitle' to get or set.\n   * @example\n   * chart.columnForTitle(\"Name\");\t// Sets the column to birthCount\n   * chart.columnForTitle();\t\t// returns \"Name\"\n   *\n   * @param {string} [value] - Property name to bind the bubble title to.\n   * @returns function - Chart, allowing chaining of commands\n   */\n  function chartColForTitle(value) {\n    if (!arguments.length) {\n      return columnForTitle;\n    }\n    columnForTitle = value;\n    return chart;\n  }\n\n  /**\n   * Get/set the property to determine the radii of the bubbles.\n   * Use 'chart.columnForRadius' to get or set.\n   *\n   * @example\n   * chart.columnForRadius(\"birthCount\");\t// Sets the column to birthCount\n   * chart.columnForRadius();\t\t// returns \"birthCount\"\n   * @public\n   * @param {string} [value] - Property name to bind the bubble radius to. Requires a numerical property.\n   * @returns function - Chart, allowing chaining of commands\n   */\n  function chartColForRadius(value) {\n    if (!arguments.length) {\n      return columnForRadius;\n    }\n    columnForRadius = value;\n    return chart;\n  }\n\n  /**\n   * Get/set the minimum radius of the bubbles.\n   * Use 'chart.minRadius' to get or set.\n   * @example\n   * \tchart.columnForColors(3); \t// Sets the column to birthCount\n   *  chart.columnForColors();\t// returns 3\n   *\n   * @param {number} [value] - The minimum radius for the width of the bubbles\n   * @returns function - Chart, allowing chaining of commands\n   */\n  function chartMinRadius(value) {\n    if (!arguments.length) {\n      return minRadius;\n    }\n    minRadius = value;\n    return chart;\n  }\n\n  /**\n   * Get/set the maximum radius of the bubbles.\n   * Use 'chart.maxRadius' to get or set.\n   *\n   * @public\n   * @param {number} [value] - The maximum radius of the bubbles for the largest value in the dataset\n   * @returns function - Chart, allowing chaining of commands\n   */\n  function chartMaxRadius(value) {\n    if (!arguments.length) {\n      return maxRadius;\n    }\n    maxRadius = value;\n    return chart;\n  }\n\n  /**\n   * Get/set the unit name for the property the is represented by the radius of the bubbles.\n   * Used in the tooltip of the bubbles.\n   * Use 'chart.unitName' to get or set.\n   * @example\n   * chart.unitName(\" babies\");\t// Sets the column to birthCount\n   * chart.unitName();\t\t// returns \" babies\"\n   *\n   * @public\n   * @param {any} [value] - The unit name to display on the tooltip when hovering over a bubble\n   * @returns function - Chart, allowing chaining of commands\n   */\n  function chartUnitName(value) {\n    if (!arguments.length) {\n      return unitName;\n    }\n    unitName = value;\n    return chart;\n  }\n\n  /**\n   * Get/set the force the separates and pushes together the bubbles on loading of the chart\n   * Use 'chart.forceApart' to get or set.\n   * @example\n   * chart.forceApart(150);\t// Sets the column to birthCount\n   * chart.forceApart();\t// returns 150\n   *\n   * @public\n   * @param {any} [value] - Determines the force to separate the bubbles from each other when loading the chart\n   * @returns function - Chart, allowing chaining of commands\n   */\n  function chartForceApart(value) {\n    if (!arguments.length) {\n      return forceApart;\n    }\n    forceApart = value;\n    return chart;\n  }\n\n  /**\n   * Get/set the property that determines if we show or hide the title of the data on the bubbles.\n   * Use 'chart.showTitleOnCircle' to get or set.\n   * @example\n   * chart.showTitleOnCircle(true);\n   * chart.forceApart();\t// returns true\n   *\n   * @public\n   * @param {boolean} [value] - Determines whether to show or hide the title of the data on the bubbles\n   * @returns function - Chart, allowing chaining of commands\n   */\n  function chartShowTitleOnCircle(value) {\n    if (!arguments.length) {\n      return showTitleOnCircle;\n    }\n    showTitleOnCircle = value;\n    return chart;\n  }\n\n  /**\n   * Set the domain and range of the colors used for the bubbles. This is only needed if you want to use custom colors in the chart.\n   * Use 'chart.customColors' to set.\n   * @example\n   * chart.customColors([\"M\",\"F\"], [\"#70b7f0\",\"#e76486\"]); \t// Sets the custom colors domain and range\n   *\n   * @param {any[]} domain - The domain. This is the set of categories used for binding the colors.\n   * @param {string[]} range - The range. This is an array of color codes that you want to represent each category in the domain.\n   * \t\t\t\t\t\t\t Note: The length of the array must perfectly match the length of the domain array.\n   * @returns function - Chart, allowing chaining of commands\n   */\n  function chartCustomColors(domain, range) {\n    customColors = true;\n    customDomain = domain;\n    customRange = range;\n    return chart;\n  }\n\n  /**\n   * Get/set the property that determines the title of the chart.\n   * Use 'chart.title' to get or set.\n   * @example\n   * chart.title(\"Birth Count in the U.S. in 2016\"); // Sets the chart title\n   * chart.title();\t// returns \"Birth Count in the U.S. in 2016\"\n   * @public\n   * @param {string} value - The title of the chart\n   * @returns function - Chart, allowing chaining of commands\n   */\n  function chartTitle(value) {\n    if (!arguments.length) {\n      return title;\n    }\n    title = value;\n    return chart;\n  }\n\n  /**\n   * Animate the removal of data from the chart (and the title)\n   * @public\n   * @param {function} [callback] - At the end of each node animation call this function for each node\n   * @returns function - Chart, allowing chaining of commands\n   */\n  function chartRemove(callback) {\n    chartSVG\n      .selectAll(\"text\")\n      .style(\"opacity\", 1)\n      .transition()\n      .duration(500)\n      .style(\"opacity\", \"0\")\n      .remove();\n    if (!arguments.length) {\n      chartSVG\n        .selectAll(\"g\")\n        .style(\"opacity\", 1)\n        .transition()\n        .duration(500)\n        .style(\"opacity\", \"0\")\n        .remove();\n    } else {\n      chartSVG\n        .selectAll(\"g\")\n        .style(\"opacity\", 1)\n        .duration(500)\n        .style(\"opacity\", \"0\")\n        .remove()\n        .on(\"end\", callback);\n    }\n    return chart;\n  }\n\n  return chart;\n}\n"]},"metadata":{},"sourceType":"module"}